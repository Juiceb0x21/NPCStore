{% extends 'core/base.html' %}
{% load static %}

{% block contenido %}
<div class="container-fluid">
    <div class="row px-xl-5">
        <div class="col-md-8 offset-md-2">
            <h1 class="mb-4">Actualizar Producto</h1>

            {% if messages %}
                {% for message in messages %}
                    {% if message.tags == 'success' %}
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    {% else %}
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}

            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                    <label for="nombre">Nombre</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" value="{{ producto.nombre }}" required>
                </div>
                <div class="form-group">
                    <label for="descripcion">Descripción</label>
                    <textarea class="form-control" id="descripcion" name="descripcion" rows="3" required>{{ producto.descripcion }}</textarea>
                </div>
                <div class="form-group">
                    <label for="categoria">Categoría</label>
                    <select class="form-control" id="categoria" name="categoria" required>
                        <option value="1" {% if producto.categoria == 1 %}selected{% endif %}>Herramienta Manual</option>
                        <option value="2" {% if producto.categoria == 2 %}selected{% endif %}>Herramienta Eléctrica</option>
                        <option value="3" {% if producto.categoria == 3 %}selected{% endif %}>Pintura</option>
                        <option value="4" {% if producto.categoria == 4 %}selected{% endif %}>Material Eléctrico</option>
                        <option value="5" {% if producto.categoria == 5 %}selected{% endif %}>Accesorio</option>
                        <option value="6" {% if producto.categoria == 6 %}selected{% endif %}>Artículo de Seguridad</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="marca">Marca</label>
                    <select class="form-control" id="marca" name="marca" required>
                        <option value="1" {% if producto.marca == 1 %}selected{% endif %}>Bosch</option>
                        <option value="2" {% if producto.marca == 2 %}selected{% endif %}>Makita</option>
                        <option value="3" {% if producto.marca == 3 %}selected{% endif %}>Stanley</option>
                        <option value="4" {% if producto.marca == 4 %}selected{% endif %}>Sika</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="precio">Precio</label>
                    <input type="number" class="form-control" id="precio" name="precio" value="{{ producto.precio }}" required>
                </div>
                <div class="form-group">
                    <label for="stock">Stock</label>
                    <input type="number" class="form-control" id="stock" name="stock" value="{{ producto.stock }}" required>
                </div>
                <div class="form-group">
                    <label for="imagen">Imagen</label>
                    <input type="file" class="form-control-file" id="imagen" name="imagen">
                    <small class="form-text text-muted">Imagen actual: {{ producto.imagen }}</small>
                </div>
                <button type="submit" class="btn btn-primary">Actualizar Producto</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Inicializar los elementos de alerta descartables de Bootstrap
    $('.alert').alert();
</script>
{% endblock %}